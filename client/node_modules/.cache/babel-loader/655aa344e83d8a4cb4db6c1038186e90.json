{"ast":null,"code":"function User(id, usersInfo, friends, markedFictions) {\n  this.id = id;\n  this.usersInfo = usersInfo;\n  this.friends = friends;\n  this.markedFictions = markedFictions;\n}\n\n_c = User;\nlet user0 = new User(0, {\n  profilePhoto: '',\n  name: 'John',\n  password: '123',\n  email: 'lol@gmail.com'\n}, [2, 1], [{\n  fiction_id: 0,\n  status: 'dropped'\n}, {\n  fiction_id: 2,\n  status: 'completed'\n}]);\nlet user1 = new User(1, {\n  profilePhoto: '',\n  name: 'Paul',\n  password: '456',\n  email: 'lol2@gmail.com'\n}, [0], [{\n  fiction_id: 0,\n  status: 'completed'\n}, {\n  fiction_id: 1,\n  status: 'planned'\n}]);\nlet user2 = new User(2, {\n  profilePhoto: '',\n  name: 'Kate',\n  password: '789',\n  email: 'lol3@gmail.com'\n}, [0], [{\n  fiction_id: 1,\n  status: 'in progress'\n}, {\n  fiction_id: 2,\n  status: 'completed'\n}, {\n  fiction_id: 0,\n  status: 'planned'\n}]);\nexport let dbUsers = {\n  users: [user0, user1, user2]\n};\nexport const addUser = (username, password, email) => {//it is already in regist page\n};\n\nasync function getAllUsers() {\n  //returns list of all fictions\n  const response = await fetch(`http://localhost:5000/user/getAllUsers`);\n\n  if (!response.ok) {\n    const message = `An error occurred at getAllUsers: ${response.statusText}`;\n    window.alert(message);\n    return;\n  }\n\n  return await response.json();\n}\n\nasync function getUserById(user_id) {\n  //returns fiction whose id was mentioned\n  const response = await fetch(`http://localhost:5000/user/getUserById/${user_id}`);\n\n  if (!response.ok) {\n    const message = `An error occurred at getUserById: ${response.statusText}`;\n    window.alert(message);\n    return;\n  }\n\n  return await response.json();\n}\n\nasync function getFictionAtUser(user_id, fiction_id) {\n  //returns fiction whose id was mentioned\n  const response = await fetch(`http://localhost:5000/user/getFictionAtUser/${user_id}/${fiction_id}`);\n\n  if (!response.ok) {\n    const message = `An error occurred at getFictionAtUser: ${response.statusText}`;\n    window.alert(message);\n    return;\n  }\n\n  return await response.json();\n}\n\nasync function getUsersFriends(user_id) {\n  //returns list of objects(users) which are friends of user\n  const response = await fetch(`http://localhost:5000/user/getUsersFriends/${user_id}`);\n\n  if (!response.ok) {\n    const message = `An error occurred at getUsersFriends: ${response.statusText}`;\n    window.alert(message);\n    return;\n  }\n\n  return await response.json();\n}\n\nasync function isFriend(user1_id, user2_id) {\n  const response = await fetch(`http://localhost:5000/user/isFriend/${user1_id}/${user2_id}`);\n\n  if (!response.ok) {\n    const message = `An error occurred at isFriend: ${response.statusText}`;\n    window.alert(message);\n    return;\n  }\n\n  return await response.json();\n}\n\nexport const makeUsersFriends = (user1_id, user2_id) => {\n  //adds users to each others friendslists\n  for (let i = 0; i < dbUsers.users.length; i++) {\n    if (dbUsers.users[i].id == user1_id) {\n      dbUsers.users[i].friends.push(user2_id);\n    } else if (dbUsers.users[i].id == user2_id) {\n      dbUsers.users[i].friends.push(user1_id);\n    }\n  }\n\n  console.log(dbUsers.users);\n};\nexport const stopBeingFriends = (user1_id, user2_id) => {\n  for (let i = 0; i < dbUsers.users.length; i++) {\n    if (dbUsers.users[i].id == user1_id) {\n      for (let j = 0; j < dbUsers.users[i].friends.length; j++) {\n        if (user2_id == dbUsers.users[i].friends[j]) {\n          dbUsers.users[i].friends.splice(j, 1);\n        }\n      }\n    } else if (dbUsers.users[i].id == user2_id) {\n      for (let j = 0; j < dbUsers.users[i].friends.length; j++) {\n        if (user1_id == dbUsers.users[i].friends[j]) {\n          dbUsers.users[i].friends.splice(j, 1);\n        }\n      }\n    }\n  }\n\n  console.log(dbUsers.users);\n};\nexport const changeUsersStatusOfFiction = (user_id, fiction_id, status) => {\n  // changes users status of metioned fiction\n  for (let i = 0; i < dbUsers.users.length; i++) {\n    if (dbUsers.users[i].id == user_id) {\n      for (let j = 0; j < dbUsers.users[i].markedFictions.length; j++) {\n        if (dbUsers.users[i].markedFictions[j].fiction_id == fiction_id) {\n          if (status == 'not completed') {\n            dbUsers.users[i].markedFictions.splice(j, 1);\n            return;\n          } else {\n            dbUsers.users[i].markedFictions[j].status = status;\n            return;\n          }\n        }\n      }\n\n      dbUsers.users[i].markedFictions.push({\n        fiction_id: fiction_id,\n        status: status\n      });\n      return;\n    }\n  }\n};\nexport { getAllUsers, getUserById, getFictionAtUser, getUsersFriends, isFriend };\n\nvar _c;\n\n$RefreshReg$(_c, \"User\");","map":{"version":3,"sources":["D:/Learning/Litsey_10th_grade/Informatics/Fictionlib/SchoolProject/client/src/DataBase/Users.js"],"names":["User","id","usersInfo","friends","markedFictions","user0","profilePhoto","name","password","email","fiction_id","status","user1","user2","dbUsers","users","addUser","username","getAllUsers","response","fetch","ok","message","statusText","window","alert","json","getUserById","user_id","getFictionAtUser","getUsersFriends","isFriend","user1_id","user2_id","makeUsersFriends","i","length","push","console","log","stopBeingFriends","j","splice","changeUsersStatusOfFiction"],"mappings":"AAAA,SAASA,IAAT,CAAcC,EAAd,EAAkBC,SAAlB,EAA6BC,OAA7B,EAAsCC,cAAtC,EAAsD;AACpD,OAAKH,EAAL,GAAUA,EAAV;AACA,OAAKC,SAAL,GAAiBA,SAAjB;AACA,OAAKC,OAAL,GAAeA,OAAf;AACA,OAAKC,cAAL,GAAsBA,cAAtB;AACD;;KALQJ,I;AAOT,IAAIK,KAAK,GAAG,IAAIL,IAAJ,CAAS,CAAT,EAAY;AAACM,EAAAA,YAAY,EAAC,EAAd;AAAkBC,EAAAA,IAAI,EAAC,MAAvB;AAA+BC,EAAAA,QAAQ,EAAC,KAAxC;AAA+CC,EAAAA,KAAK,EAAC;AAArD,CAAZ,EAAmF,CAAC,CAAD,EAAI,CAAJ,CAAnF,EAA2F,CAAC;AAACC,EAAAA,UAAU,EAAE,CAAb;AAAgBC,EAAAA,MAAM,EAAC;AAAvB,CAAD,EAAoC;AAACD,EAAAA,UAAU,EAAE,CAAb;AAAgBC,EAAAA,MAAM,EAAC;AAAvB,CAApC,CAA3F,CAAZ;AACA,IAAIC,KAAK,GAAG,IAAIZ,IAAJ,CAAS,CAAT,EAAY;AAACM,EAAAA,YAAY,EAAC,EAAd;AAAkBC,EAAAA,IAAI,EAAC,MAAvB;AAA+BC,EAAAA,QAAQ,EAAC,KAAxC;AAA+CC,EAAAA,KAAK,EAAC;AAArD,CAAZ,EAAoF,CAAC,CAAD,CAApF,EAAyF,CAAC;AAACC,EAAAA,UAAU,EAAE,CAAb;AAAgBC,EAAAA,MAAM,EAAC;AAAvB,CAAD,EAAsC;AAACD,EAAAA,UAAU,EAAE,CAAb;AAAgBC,EAAAA,MAAM,EAAC;AAAvB,CAAtC,CAAzF,CAAZ;AACA,IAAIE,KAAK,GAAG,IAAIb,IAAJ,CAAS,CAAT,EAAY;AAACM,EAAAA,YAAY,EAAC,EAAd;AAAkBC,EAAAA,IAAI,EAAC,MAAvB;AAA+BC,EAAAA,QAAQ,EAAC,KAAxC;AAA+CC,EAAAA,KAAK,EAAC;AAArD,CAAZ,EAAoF,CAAC,CAAD,CAApF,EAAyF,CAAC;AAACC,EAAAA,UAAU,EAAE,CAAb;AAAgBC,EAAAA,MAAM,EAAC;AAAvB,CAAD,EAAwC;AAACD,EAAAA,UAAU,EAAE,CAAb;AAAgBC,EAAAA,MAAM,EAAC;AAAvB,CAAxC,EAA6E;AAACD,EAAAA,UAAU,EAAE,CAAb;AAAgBC,EAAAA,MAAM,EAAC;AAAvB,CAA7E,CAAzF,CAAZ;AAEA,OAAO,IAAIG,OAAO,GAAG;AAACC,EAAAA,KAAK,EAAC,CAACV,KAAD,EAAQO,KAAR,EAAeC,KAAf;AAAP,CAAd;AAGP,OAAO,MAAMG,OAAO,GAAG,CAACC,QAAD,EAAWT,QAAX,EAAqBC,KAArB,KAA8B,CACnD;AACD,CAFM;;AAIP,eAAeS,WAAf,GAA6B;AAC3B;AACA,QAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAE,wCAAF,CAA5B;;AAEA,MAAI,CAACD,QAAQ,CAACE,EAAd,EAAkB;AACf,UAAMC,OAAO,GAAI,qCAAoCH,QAAQ,CAACI,UAAW,EAAzE;AACCC,IAAAA,MAAM,CAACC,KAAP,CAAaH,OAAb;AACA;AACH;;AAED,SAAO,MAAMH,QAAQ,CAACO,IAAT,EAAb;AACD;;AAED,eAAeC,WAAf,CAA2BC,OAA3B,EAAmC;AACjC;AACA,QAAMT,QAAQ,GAAG,MAAMC,KAAK,CAAE,0CAAyCQ,OAAQ,EAAnD,CAA5B;;AAEA,MAAI,CAACT,QAAQ,CAACE,EAAd,EAAkB;AACf,UAAMC,OAAO,GAAI,qCAAoCH,QAAQ,CAACI,UAAW,EAAzE;AACCC,IAAAA,MAAM,CAACC,KAAP,CAAaH,OAAb;AACA;AACH;;AAED,SAAO,MAAMH,QAAQ,CAACO,IAAT,EAAb;AACD;;AAED,eAAeG,gBAAf,CAAgCD,OAAhC,EAAyClB,UAAzC,EAAoD;AAClD;AACA,QAAMS,QAAQ,GAAG,MAAMC,KAAK,CAAE,+CAA8CQ,OAAQ,IAAGlB,UAAW,EAAtE,CAA5B;;AAEA,MAAI,CAACS,QAAQ,CAACE,EAAd,EAAkB;AACf,UAAMC,OAAO,GAAI,0CAAyCH,QAAQ,CAACI,UAAW,EAA9E;AACCC,IAAAA,MAAM,CAACC,KAAP,CAAaH,OAAb;AACA;AACH;;AAED,SAAO,MAAMH,QAAQ,CAACO,IAAT,EAAb;AACD;;AAED,eAAeI,eAAf,CAAgCF,OAAhC,EAAyC;AACvC;AACA,QAAMT,QAAQ,GAAG,MAAMC,KAAK,CAAE,8CAA6CQ,OAAQ,EAAvD,CAA5B;;AAEA,MAAI,CAACT,QAAQ,CAACE,EAAd,EAAkB;AACf,UAAMC,OAAO,GAAI,yCAAwCH,QAAQ,CAACI,UAAW,EAA7E;AACCC,IAAAA,MAAM,CAACC,KAAP,CAAaH,OAAb;AACA;AACH;;AAED,SAAO,MAAMH,QAAQ,CAACO,IAAT,EAAb;AACD;;AAED,eAAeK,QAAf,CAAyBC,QAAzB,EAAmCC,QAAnC,EAA4C;AAC1C,QAAMd,QAAQ,GAAG,MAAMC,KAAK,CAAE,uCAAsCY,QAAS,IAAGC,QAAS,EAA7D,CAA5B;;AAEA,MAAI,CAACd,QAAQ,CAACE,EAAd,EAAkB;AACf,UAAMC,OAAO,GAAI,kCAAiCH,QAAQ,CAACI,UAAW,EAAtE;AACCC,IAAAA,MAAM,CAACC,KAAP,CAAaH,OAAb;AACA;AACH;;AAED,SAAO,MAAMH,QAAQ,CAACO,IAAT,EAAb;AACD;;AAED,OAAO,MAAMQ,gBAAgB,GAAG,CAACF,QAAD,EAAWC,QAAX,KAAuB;AACrD;AACA,OAAK,IAAIE,CAAC,GAAC,CAAX,EAAaA,CAAC,GAAGrB,OAAO,CAACC,KAAR,CAAcqB,MAA/B,EAAuCD,CAAC,EAAxC,EAA2C;AACzC,QAAIrB,OAAO,CAACC,KAAR,CAAcoB,CAAd,EAAiBlC,EAAjB,IAAuB+B,QAA3B,EAAoC;AAClClB,MAAAA,OAAO,CAACC,KAAR,CAAcoB,CAAd,EAAiBhC,OAAjB,CAAyBkC,IAAzB,CAA8BJ,QAA9B;AACD,KAFD,MAEO,IAAInB,OAAO,CAACC,KAAR,CAAcoB,CAAd,EAAiBlC,EAAjB,IAAuBgC,QAA3B,EAAoC;AACzCnB,MAAAA,OAAO,CAACC,KAAR,CAAcoB,CAAd,EAAiBhC,OAAjB,CAAyBkC,IAAzB,CAA8BL,QAA9B;AACD;AACF;;AACDM,EAAAA,OAAO,CAACC,GAAR,CAAYzB,OAAO,CAACC,KAApB;AACD,CAVM;AAYP,OAAO,MAAMyB,gBAAgB,GAAG,CAACR,QAAD,EAAWC,QAAX,KAAuB;AACrD,OAAK,IAAIE,CAAC,GAAC,CAAX,EAAaA,CAAC,GAAGrB,OAAO,CAACC,KAAR,CAAcqB,MAA/B,EAAuCD,CAAC,EAAxC,EAA2C;AACzC,QAAIrB,OAAO,CAACC,KAAR,CAAcoB,CAAd,EAAiBlC,EAAjB,IAAuB+B,QAA3B,EAAoC;AAClC,WAAK,IAAIS,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG3B,OAAO,CAACC,KAAR,CAAcoB,CAAd,EAAiBhC,OAAjB,CAAyBiC,MAA7C,EAAqDK,CAAC,EAAtD,EAA0D;AACxD,YAAIR,QAAQ,IAAInB,OAAO,CAACC,KAAR,CAAcoB,CAAd,EAAiBhC,OAAjB,CAAyBsC,CAAzB,CAAhB,EAA4C;AAC1C3B,UAAAA,OAAO,CAACC,KAAR,CAAcoB,CAAd,EAAiBhC,OAAjB,CAAyBuC,MAAzB,CAAgCD,CAAhC,EAAmC,CAAnC;AACD;AACF;AACF,KAND,MAMO,IAAI3B,OAAO,CAACC,KAAR,CAAcoB,CAAd,EAAiBlC,EAAjB,IAAuBgC,QAA3B,EAAoC;AACzC,WAAK,IAAIQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG3B,OAAO,CAACC,KAAR,CAAcoB,CAAd,EAAiBhC,OAAjB,CAAyBiC,MAA7C,EAAqDK,CAAC,EAAtD,EAA0D;AACxD,YAAIT,QAAQ,IAAIlB,OAAO,CAACC,KAAR,CAAcoB,CAAd,EAAiBhC,OAAjB,CAAyBsC,CAAzB,CAAhB,EAA4C;AAC1C3B,UAAAA,OAAO,CAACC,KAAR,CAAcoB,CAAd,EAAiBhC,OAAjB,CAAyBuC,MAAzB,CAAgCD,CAAhC,EAAmC,CAAnC;AACD;AACF;AACF;AACF;;AACDH,EAAAA,OAAO,CAACC,GAAR,CAAYzB,OAAO,CAACC,KAApB;AACD,CAjBM;AAmBP,OAAO,MAAM4B,0BAA0B,GAAG,CAACf,OAAD,EAAUlB,UAAV,EAAsBC,MAAtB,KAAgC;AACxE;AAEA,OAAK,IAAIwB,CAAC,GAAC,CAAX,EAAaA,CAAC,GAAGrB,OAAO,CAACC,KAAR,CAAcqB,MAA/B,EAAuCD,CAAC,EAAxC,EAA2C;AACzC,QAAIrB,OAAO,CAACC,KAAR,CAAcoB,CAAd,EAAiBlC,EAAjB,IAAuB2B,OAA3B,EAAmC;AACjC,WAAK,IAAIa,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG3B,OAAO,CAACC,KAAR,CAAcoB,CAAd,EAAiB/B,cAAjB,CAAgCgC,MAApD,EAA4DK,CAAC,EAA7D,EAAiE;AAC/D,YAAI3B,OAAO,CAACC,KAAR,CAAcoB,CAAd,EAAiB/B,cAAjB,CAAgCqC,CAAhC,EAAmC/B,UAAnC,IAAiDA,UAArD,EAAgE;AAC9D,cAAKC,MAAM,IAAI,eAAf,EAAgC;AAC9BG,YAAAA,OAAO,CAACC,KAAR,CAAcoB,CAAd,EAAiB/B,cAAjB,CAAgCsC,MAAhC,CAAuCD,CAAvC,EAA0C,CAA1C;AACA;AACD,WAHD,MAGO;AACL3B,YAAAA,OAAO,CAACC,KAAR,CAAcoB,CAAd,EAAiB/B,cAAjB,CAAgCqC,CAAhC,EAAmC9B,MAAnC,GAA4CA,MAA5C;AACA;AACD;AACF;AACF;;AACDG,MAAAA,OAAO,CAACC,KAAR,CAAcoB,CAAd,EAAiB/B,cAAjB,CAAgCiC,IAAhC,CAAqC;AAAC3B,QAAAA,UAAU,EAACA,UAAZ;AAAwBC,QAAAA,MAAM,EAACA;AAA/B,OAArC;AACA;AACD;AACF;AACF,CApBM;AAsBP,SAASO,WAAT,EAAsBS,WAAtB,EAAmCE,gBAAnC,EAAqDC,eAArD,EAAsEC,QAAtE","sourcesContent":["function User(id, usersInfo, friends, markedFictions) {\r\n  this.id = id;\r\n  this.usersInfo = usersInfo;\r\n  this.friends = friends;\r\n  this.markedFictions = markedFictions;\r\n}\r\n\r\nlet user0 = new User(0, {profilePhoto:'', name:'John', password:'123', email:'lol@gmail.com'}, [2, 1], [{fiction_id: 0, status:'dropped'}, {fiction_id: 2, status:'completed'}])\r\nlet user1 = new User(1, {profilePhoto:'', name:'Paul', password:'456', email:'lol2@gmail.com'}, [0], [{fiction_id: 0, status:'completed'}, {fiction_id: 1, status:'planned'}])\r\nlet user2 = new User(2, {profilePhoto:'', name:'Kate', password:'789', email:'lol3@gmail.com'}, [0], [{fiction_id: 1, status:'in progress'}, {fiction_id: 2, status:'completed'}, {fiction_id: 0, status:'planned'}])\r\n\r\nexport let dbUsers = {users:[user0, user1, user2]}\r\n\r\n\r\nexport const addUser = (username, password, email) =>{\r\n  //it is already in regist page\r\n}\r\n\r\nasync function getAllUsers (){\r\n  //returns list of all fictions\r\n  const response = await fetch(`http://localhost:5000/user/getAllUsers`);\r\n\r\n  if (!response.ok) {\r\n     const message = `An error occurred at getAllUsers: ${response.statusText}`;\r\n      window.alert(message);\r\n      return;\r\n  }\r\n\r\n  return await response.json();\r\n}\r\n\r\nasync function getUserById(user_id){\r\n  //returns fiction whose id was mentioned\r\n  const response = await fetch(`http://localhost:5000/user/getUserById/${user_id}`);\r\n\r\n  if (!response.ok) {\r\n     const message = `An error occurred at getUserById: ${response.statusText}`;\r\n      window.alert(message);\r\n      return;\r\n  }\r\n\r\n  return await response.json();\r\n}\r\n\r\nasync function getFictionAtUser(user_id, fiction_id){\r\n  //returns fiction whose id was mentioned\r\n  const response = await fetch(`http://localhost:5000/user/getFictionAtUser/${user_id}/${fiction_id}`);\r\n\r\n  if (!response.ok) {\r\n     const message = `An error occurred at getFictionAtUser: ${response.statusText}`;\r\n      window.alert(message);\r\n      return;\r\n  }\r\n\r\n  return await response.json();\r\n}\r\n\r\nasync function getUsersFriends (user_id) {\r\n  //returns list of objects(users) which are friends of user\r\n  const response = await fetch(`http://localhost:5000/user/getUsersFriends/${user_id}`);\r\n\r\n  if (!response.ok) {\r\n     const message = `An error occurred at getUsersFriends: ${response.statusText}`;\r\n      window.alert(message);\r\n      return;\r\n  }\r\n\r\n  return await response.json();\r\n}\r\n\r\nasync function isFriend (user1_id, user2_id){\r\n  const response = await fetch(`http://localhost:5000/user/isFriend/${user1_id}/${user2_id}`);\r\n\r\n  if (!response.ok) {\r\n     const message = `An error occurred at isFriend: ${response.statusText}`;\r\n      window.alert(message);\r\n      return;\r\n  }\r\n\r\n  return await response.json();\r\n}\r\n\r\nexport const makeUsersFriends = (user1_id, user2_id) =>{\r\n  //adds users to each others friendslists\r\n  for (let i=0;i < dbUsers.users.length; i++){\r\n    if (dbUsers.users[i].id == user1_id){\r\n      dbUsers.users[i].friends.push(user2_id)\r\n    } else if (dbUsers.users[i].id == user2_id){\r\n      dbUsers.users[i].friends.push(user1_id)\r\n    }\r\n  }\r\n  console.log(dbUsers.users);\r\n}\r\n\r\nexport const stopBeingFriends = (user1_id, user2_id) =>{\r\n  for (let i=0;i < dbUsers.users.length; i++){\r\n    if (dbUsers.users[i].id == user1_id){\r\n      for (let j = 0; j < dbUsers.users[i].friends.length; j++) {\r\n        if (user2_id == dbUsers.users[i].friends[j]){\r\n          dbUsers.users[i].friends.splice(j, 1)\r\n        }\r\n      }\r\n    } else if (dbUsers.users[i].id == user2_id){\r\n      for (let j = 0; j < dbUsers.users[i].friends.length; j++) {\r\n        if (user1_id == dbUsers.users[i].friends[j]){\r\n          dbUsers.users[i].friends.splice(j, 1)\r\n        }\r\n      }\r\n    }\r\n  }\r\n  console.log(dbUsers.users);\r\n}\r\n\r\nexport const changeUsersStatusOfFiction = (user_id, fiction_id, status) =>{\r\n  // changes users status of metioned fiction\r\n\r\n  for (let i=0;i < dbUsers.users.length; i++){\r\n    if (dbUsers.users[i].id == user_id){\r\n      for (let j = 0; j < dbUsers.users[i].markedFictions.length; j++) {\r\n        if (dbUsers.users[i].markedFictions[j].fiction_id == fiction_id){\r\n          if ((status == 'not completed')){\r\n            dbUsers.users[i].markedFictions.splice(j, 1)\r\n            return\r\n          } else {\r\n            dbUsers.users[i].markedFictions[j].status = status\r\n            return\r\n          }\r\n        }\r\n      }\r\n      dbUsers.users[i].markedFictions.push({fiction_id:fiction_id, status:status})\r\n      return\r\n    }\r\n  }\r\n}\r\n\r\nexport { getAllUsers, getUserById, getFictionAtUser, getUsersFriends, isFriend }\r\n"]},"metadata":{},"sourceType":"module"}