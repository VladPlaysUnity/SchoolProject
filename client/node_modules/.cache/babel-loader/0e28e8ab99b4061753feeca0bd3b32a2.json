{"ast":null,"code":"var _jsxFileName = \"D:\\\\Programming\\\\Projects\\\\SchoolProject FictionLib\\\\client\\\\src\\\\components\\\\RegistrationPage\\\\registrationPageContainer.jsx\",\n    _s = $RefreshSig$();\n\nimport RegistrationPage from './registrationPage.jsx';\nimport { useNavigate } from 'react-router-dom';\nimport { useState, useEffect } from 'react';\nimport './../../redux/reducers/registrationReducer';\nimport { getLoggedUserId, setLoggedUserId, getLoggedInStatus } from './../../LocalInfo/localInfo.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst RegistrationPageContainer = props => {\n  _s();\n\n  const [message, setMessage] = useState(['', '']);\n\n  async function tryLog(username, password) {\n    const respons = await fetch(`http://localhost:5000/user/checkIfUsersDataIsRight/${username}/${password}`);\n\n    if (!respons.ok) {\n      const message = `An error occurred at registpage: ${respons.statusText}`;\n      window.alert(message);\n      return;\n    }\n\n    let r = await respons.json();\n\n    if (r == 'Your password or username is not correct') {\n      console.log(r);\n      setMessage(['login', r]);\n    } else {\n      console.log(setLoggedUserId(r));\n      props.setLoggedUser(r);\n    }\n  }\n\n  async function signUpFu(name, pass, email) {\n    const newUser = {\n      name: name,\n      password: pass,\n      email: email\n    };\n    const response = await fetch(\"http://localhost:5000/user/add\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(newUser)\n    });\n\n    if (!response.ok) {\n      const message = `An error occurred at registpage: ${response.statusText}`;\n      window.alert(message);\n      return;\n    }\n\n    let r = await response.json();\n\n    if (r == 'User with this email already exists' || r == 'This username is already taken') {\n      console.log(r);\n      setMessage(['signup', r]);\n    } else {\n      console.log(setLoggedUserId(r));\n      props.setLoggedUser(r);\n    }\n  }\n\n  async function logInFunc(username, password) {\n    tryLog(username, password);\n  }\n\n  async function signUpFunc(name, pass, email) {\n    signUpFu(name, pass, email);\n  }\n\n  return /*#__PURE__*/_jsxDEV(RegistrationPage, {\n    tryLogIn: logInFunc,\n    trySignUp: signUpFunc,\n    message: message\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n\n_s(RegistrationPageContainer, \"2r6Y8jSxSf9n+nax7sJfh7Zct6w=\");\n\n_c = RegistrationPageContainer;\nexport default RegistrationPageContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"RegistrationPageContainer\");","map":{"version":3,"sources":["D:/Programming/Projects/SchoolProject FictionLib/client/src/components/RegistrationPage/registrationPageContainer.jsx"],"names":["RegistrationPage","useNavigate","useState","useEffect","getLoggedUserId","setLoggedUserId","getLoggedInStatus","RegistrationPageContainer","props","message","setMessage","tryLog","username","password","respons","fetch","ok","statusText","window","alert","r","json","console","log","setLoggedUser","signUpFu","name","pass","email","newUser","response","method","headers","body","JSON","stringify","logInFunc","signUpFunc"],"mappings":"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","sourcesContent":["import RegistrationPage from './registrationPage.jsx'\r\n\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { useState, useEffect } from 'react'\r\n\r\nimport {  } from './../../redux/reducers/registrationReducer';\r\nimport { getLoggedUserId, setLoggedUserId, getLoggedInStatus } from './../../LocalInfo/localInfo.js'\r\n\r\nconst RegistrationPageContainer = (props) =>{\r\n  const [message, setMessage] = useState(['', ''])\r\n\r\n  async function tryLog(username, password){\r\n    const respons = await fetch(`http://localhost:5000/user/checkIfUsersDataIsRight/${username}/${password}`);\r\n\r\n    if (!respons.ok) {\r\n       const message = `An error occurred at registpage: ${respons.statusText}`;\r\n        window.alert(message);\r\n        return;\r\n    }\r\n\r\n    let r = await respons.json();\r\n    if ((r == 'Your password or username is not correct')){\r\n      console.log(r);\r\n      setMessage(['login', r])\r\n    }else{\r\n      console.log(setLoggedUserId(r));\r\n      props.setLoggedUser(r)\r\n    }\r\n  }\r\n\r\n  async function signUpFu(name, pass, email) {\r\n\r\n    const newUser = { name: name, password: pass, email:email };\r\n    const response = await fetch(\"http://localhost:5000/user/add\", {\r\n     method: \"POST\",\r\n     headers: {\r\n       \"Content-Type\": \"application/json\",\r\n     },\r\n     body: JSON.stringify(newUser),\r\n   })\r\n   if (!response.ok) {\r\n      const message = `An error occurred at registpage: ${response.statusText}`;\r\n       window.alert(message);\r\n       return;\r\n   }\r\n\r\n   let r = await response.json();\r\n   if ((r == 'User with this email already exists')||(r == 'This username is already taken')){\r\n     console.log(r);\r\n     setMessage(['signup', r])\r\n   }else{\r\n     console.log(setLoggedUserId(r));\r\n     props.setLoggedUser(r)\r\n   }\r\n  }\r\n\r\n  async function logInFunc(username, password){\r\n    tryLog(username, password)\r\n  }\r\n  async function signUpFunc (name, pass, email){\r\n    signUpFu(name,pass,email)\r\n  }\r\n  return(\r\n    <RegistrationPage tryLogIn={logInFunc} trySignUp={signUpFunc} message={message}/>\r\n  )\r\n}\r\n\r\nexport default RegistrationPageContainer;\r\n"]},"metadata":{},"sourceType":"module"}