{"ast":null,"code":"import { changeUsersStatusOfFiction } from './../../DataBase/Users.js';\nimport { changeUsersRatingOfFiction } from './../../DataBase/Fictions.js';\nimport { addComment } from './../../DataBase/Comments.js';\nconst CHANGE_USERS_STATUS_OF_FICTION = 'CHANGE-USERS-STATUS-OF-FICTION';\nconst CHANGE_USERS_RATING_OF_FICTION = 'CHANGE-USERS-RATING-OF-FICTION';\nconst ADD_COMMENT = 'ADD-COMMENT';\nlet intialState = {};\n\nconst chosenFictionReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : intialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case CHANGE_USERS_STATUS_OF_FICTION:\n      {\n        async function changeStatus() {\n          await fetch(`http://localhost:5000//user/changeUsersStatusOfFiction/${action.user_id}`, {\n            method: \"POST\",\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              fiction_id: action.fiction_id,\n              status: action.status\n            })\n          });\n        }\n\n        changeStatus();\n        return state;\n      }\n\n    case CHANGE_USERS_RATING_OF_FICTION:\n      {\n        async function changeRating() {\n          await fetch(`http://localhost:5000/fiction/changeUsersRatingOfFiction/${action.fiction_id}/${action.user_id}`, {\n            method: \"POST\",\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              rating: action.rating\n            })\n          });\n        }\n\n        changeRating();\n        return state;\n      }\n\n    case ADD_COMMENT:\n      {\n        addComment(action.author_id, action.place_id, action.content);\n        return state;\n      }\n      ;\n\n    default:\n      return state;\n  }\n};\n\nexport default chosenFictionReducer;\nexport const changeUsersStatusOfFictionActionCreator = (user_id, fiction_id, status) => ({\n  type: CHANGE_USERS_STATUS_OF_FICTION,\n  user_id: user_id,\n  fiction_id: fiction_id,\n  status: status\n});\nexport const changeUsersRatingOfFictionActionCreator = (fiction_id, user_id, rating) => ({\n  type: CHANGE_USERS_RATING_OF_FICTION,\n  user_id: user_id,\n  fiction_id: fiction_id,\n  rating: rating\n});\nexport const addCommentActionCreator = (author_id, place_id, content) => ({\n  type: ADD_COMMENT,\n  place_id: place_id,\n  content: content,\n  author_id: author_id\n});","map":{"version":3,"sources":["D:/Learning/Litsey_10th_grade/Informatics/Fictionlib/SchoolProject/client/src/redux/reducers/chosenFictionReducer.js"],"names":["changeUsersStatusOfFiction","changeUsersRatingOfFiction","addComment","CHANGE_USERS_STATUS_OF_FICTION","CHANGE_USERS_RATING_OF_FICTION","ADD_COMMENT","intialState","chosenFictionReducer","state","action","type","changeStatus","fetch","user_id","method","headers","body","JSON","stringify","fiction_id","status","changeRating","rating","author_id","place_id","content","changeUsersStatusOfFictionActionCreator","changeUsersRatingOfFictionActionCreator","addCommentActionCreator"],"mappings":"AAAA,SAAQA,0BAAR,QAAyC,2BAAzC;AACA,SAAQC,0BAAR,QAAyC,8BAAzC;AACA,SAAQC,UAAR,QAAyB,8BAAzB;AAEA,MAAMC,8BAA8B,GAAG,gCAAvC;AACA,MAAMC,8BAA8B,GAAG,gCAAvC;AACA,MAAMC,WAAW,GAAG,aAApB;AAEA,IAAIC,WAAW,GAAG,EAAlB;;AAEA,MAAMC,oBAAoB,GAAG,YAAiC;AAAA,MAAhCC,KAAgC,uEAAxBF,WAAwB;AAAA,MAAXG,MAAW;;AAC5D,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKP,8BAAL;AAAoC;AAClC,uBAAeQ,YAAf,GAA6B;AAC3B,gBAAMC,KAAK,CAAE,0DAAyDH,MAAM,CAACI,OAAQ,EAA1E,EAA6E;AACpFC,YAAAA,MAAM,EAAE,MAD4E;AAEpFC,YAAAA,OAAO,EAAE;AACP,8BAAgB;AADT,aAF2E;AAKpFC,YAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAACC,cAAAA,UAAU,EAACV,MAAM,CAACU,UAAnB;AAA+BC,cAAAA,MAAM,EAACX,MAAM,CAACW;AAA7C,aAAf;AAL8E,WAA7E,CAAX;AAOD;;AACDT,QAAAA,YAAY;AACZ,eAAOH,KAAP;AACD;;AACD,SAAKJ,8BAAL;AAAoC;AAClC,uBAAeiB,YAAf,GAA8B;AAC5B,gBAAMT,KAAK,CAAE,4DAA2DH,MAAM,CAACU,UAAW,IAAGV,MAAM,CAACI,OAAQ,EAAjG,EAAoG;AAC3GC,YAAAA,MAAM,EAAE,MADmG;AAE3GC,YAAAA,OAAO,EAAE;AACP,8BAAgB;AADT,aAFkG;AAK3GC,YAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAACI,cAAAA,MAAM,EAACb,MAAM,CAACa;AAAf,aAAf;AALqG,WAApG,CAAX;AAOD;;AACDD,QAAAA,YAAY;AACZ,eAAOb,KAAP;AACD;;AACD,SAAKH,WAAL;AAAkB;AAChBH,QAAAA,UAAU,CAACO,MAAM,CAACc,SAAR,EAAmBd,MAAM,CAACe,QAA1B,EAAoCf,MAAM,CAACgB,OAA3C,CAAV;AACA,eAAOjB,KAAP;AACD;AAAA;;AACD;AACE,aAAOA,KAAP;AAhCJ;AAkCD,CAnCD;;AAqCA,eAAeD,oBAAf;AAEA,OAAO,MAAMmB,uCAAuC,GAAG,CAACb,OAAD,EAAUM,UAAV,EAAsBC,MAAtB,MACrD;AAACV,EAAAA,IAAI,EAAEP,8BAAP;AAAuCU,EAAAA,OAAO,EAAEA,OAAhD;AAAyDM,EAAAA,UAAU,EAAEA,UAArE;AAAiFC,EAAAA,MAAM,EAAEA;AAAzF,CADqD,CAAhD;AAGP,OAAO,MAAMO,uCAAuC,GAAG,CAACR,UAAD,EAAaN,OAAb,EAAsBS,MAAtB,MACrD;AAACZ,EAAAA,IAAI,EAAEN,8BAAP;AAAuCS,EAAAA,OAAO,EAACA,OAA/C;AAAwDM,EAAAA,UAAU,EAACA,UAAnE;AAA+EG,EAAAA,MAAM,EAACA;AAAtF,CADqD,CAAhD;AAGP,OAAO,MAAMM,uBAAuB,GAAG,CAACL,SAAD,EAAYC,QAAZ,EAAsBC,OAAtB,MACrC;AAACf,EAAAA,IAAI,EAAEL,WAAP;AAAoBmB,EAAAA,QAAQ,EAAEA,QAA9B;AAAwCC,EAAAA,OAAO,EAAEA,OAAjD;AAA0DF,EAAAA,SAAS,EAAEA;AAArE,CADqC,CAAhC","sourcesContent":["import {changeUsersStatusOfFiction} from './../../DataBase/Users.js'\r\nimport {changeUsersRatingOfFiction} from './../../DataBase/Fictions.js'\r\nimport {addComment} from './../../DataBase/Comments.js'\r\n\r\nconst CHANGE_USERS_STATUS_OF_FICTION = 'CHANGE-USERS-STATUS-OF-FICTION';\r\nconst CHANGE_USERS_RATING_OF_FICTION = 'CHANGE-USERS-RATING-OF-FICTION';\r\nconst ADD_COMMENT = 'ADD-COMMENT';\r\n\r\nlet intialState = {};\r\n\r\nconst chosenFictionReducer = (state = intialState, action) => {\r\n  switch (action.type) {\r\n    case CHANGE_USERS_STATUS_OF_FICTION:{\r\n      async function changeStatus(){\r\n        await fetch(`http://localhost:5000//user/changeUsersStatusOfFiction/${action.user_id}`, {\r\n            method: \"POST\",\r\n            headers: {\r\n              'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({fiction_id:action.fiction_id, status:action.status}),\r\n          })\r\n      }\r\n      changeStatus()\r\n      return state\r\n    }\r\n    case CHANGE_USERS_RATING_OF_FICTION:{\r\n      async function changeRating() {\r\n        await fetch(`http://localhost:5000/fiction/changeUsersRatingOfFiction/${action.fiction_id}/${action.user_id}`, {\r\n            method: \"POST\",\r\n            headers: {\r\n              'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({rating:action.rating}),\r\n          })\r\n      }\r\n      changeRating()\r\n      return state\r\n    }\r\n    case ADD_COMMENT: {\r\n      addComment(action.author_id, action.place_id, action.content)\r\n      return state;\r\n    };\r\n    default:\r\n      return state\r\n  }\r\n};\r\n\r\nexport default chosenFictionReducer;\r\n\r\nexport const changeUsersStatusOfFictionActionCreator = (user_id, fiction_id, status) =>(\r\n  {type: CHANGE_USERS_STATUS_OF_FICTION, user_id: user_id, fiction_id: fiction_id, status: status}\r\n);\r\nexport const changeUsersRatingOfFictionActionCreator = (fiction_id, user_id, rating) =>(\r\n  {type: CHANGE_USERS_RATING_OF_FICTION, user_id:user_id, fiction_id:fiction_id, rating:rating}\r\n);\r\nexport const addCommentActionCreator = (author_id, place_id, content) =>(\r\n  {type: ADD_COMMENT, place_id: place_id, content: content, author_id: author_id}\r\n);\r\n"]},"metadata":{},"sourceType":"module"}