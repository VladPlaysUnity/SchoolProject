{"ast":null,"code":"var _jsxFileName = \"D:\\\\Learning\\\\Litsey_10th_grade\\\\Informatics\\\\Fictionlib\\\\SchoolProject\\\\client\\\\src\\\\components\\\\Catalog\\\\catalogPageContainer.jsx\",\n    _s = $RefreshSig$();\n\nimport s from './catalog.module.css';\nimport CatalogPage from './catalog.jsx';\nimport { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { getAllBooks, getAllFilms, getFictionById } from './../../DataBase/Fictions.js';\nimport { getUserById } from './../../DataBase/Users.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CatalogPageContainer = props => {\n  _s();\n\n  const [elems, setElems] = useState([]);\n  const [type, seType] = useState([]);\n  const [error, setError] = useState(null);\n  const [isLoaded, setIsLoaded] = useState(false);\n  let params = useParams();\n\n  switch (params.type) {\n    case 'allBooks':\n      setType('book');\n      useEffect(() => {\n        getAllBooks().then(result => {\n          setIsLoaded(true);\n          setElems(result);\n        });\n      }, []);\n\n    case 'allFilms':\n      setType('film');\n      useEffect(() => {\n        getAllFilms().then(result => {\n          setIsLoaded(true);\n          setElems(result);\n        });\n      }, []);\n\n    case 'allUsers':\n      setType('user');\n      useEffect(() => {\n        getAllUsers().then(result => {\n          setIsLoaded(true);\n          setElems(result);\n        });\n      }, []);\n\n    case 'read_books':\n      setType('book');\n      useEffect(() => {\n        getUserById(params.userID).then(user => {\n          let rb = [];\n          let f = '';\n\n          for (let i = 0; i < user.markedFictions.length; i++) {\n            if (user.markedFictions[i].type == 'book' && user.markedFictions[i].status == 'completed') {\n              f = getFictionById(user.markedFictions[i]).then(fic => {\n                rb.push(fic);\n              });\n            }\n          }\n\n          Promise.all(rb).then(d => {\n            setElems(d);\n            setIsLoaded(true);\n          });\n        });\n      }, []);\n\n    case 'planned_books':\n      setType('book');\n      useEffect(() => {\n        getUserById(params.userID).then(user => {\n          let pb = [];\n          let f = '';\n\n          for (let i = 0; i < user.markedFictions.length; i++) {\n            if (user.markedFictions[i].type == 'book' && user.markedFictions[i].status == 'planned') {\n              f = getFictionById(user.markedFictions[i]).then(fic => {\n                pb.push(fic);\n              });\n            }\n          }\n\n          Promise.all(pb).then(d => {\n            setElems(d);\n            setIsLoaded(true);\n          });\n        });\n      }, []);\n\n    case 'watched_films':\n      setType('film');\n      useEffect(() => {\n        getUserById(params.userID).then(user => {\n          let wf = [];\n          let f = '';\n\n          for (let i = 0; i < user.markedFictions.length; i++) {\n            if (user.markedFictions[i].type == 'film' && user.markedFictions[i].status == 'completed') {\n              f = getFictionById(user.markedFictions[i]).then(fic => {\n                pf.push(fic);\n              });\n            }\n          }\n\n          Promise.all(wf).then(d => {\n            setElems(d);\n            setIsLoaded(true);\n          });\n        });\n      }, []);\n\n    case 'planned_films':\n      setType('film');\n      useEffect(() => {\n        getUserById(params.userID).then(user => {\n          let pf = [];\n          let f = '';\n\n          for (let i = 0; i < user.markedFictions.length; i++) {\n            if (user.markedFictions[i].type == 'film' && user.markedFictions[i].status == 'planned') {\n              f = getFictionById(user.markedFictions[i]).then(fic => {\n                pf.push(fic);\n              });\n            }\n          }\n\n          Promise.all(pf).then(d => {\n            setElems(d);\n            setIsLoaded(true);\n          });\n        });\n      }, []);\n\n    default:\n      setElems([]);\n  }\n\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Error: \", error.message]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 12\n    }, this);\n  } else if (!isLoaded) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 7\n    }, this);\n  } else if (isLoaded) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(CatalogPage, {\n        type: type,\n        elems: elems\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, this);\n  }\n};\n\n_s(CatalogPageContainer, \"Q6kPXGa6trbfuiddxhRG4UxLjpk=\", false, function () {\n  return [useParams];\n});\n\n_c = CatalogPageContainer;\nexport default CatalogPageContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"CatalogPageContainer\");","map":{"version":3,"sources":["D:/Learning/Litsey_10th_grade/Informatics/Fictionlib/SchoolProject/client/src/components/Catalog/catalogPageContainer.jsx"],"names":["s","CatalogPage","useEffect","useState","useParams","getAllBooks","getAllFilms","getFictionById","getUserById","CatalogPageContainer","props","elems","setElems","type","seType","error","setError","isLoaded","setIsLoaded","params","setType","then","result","getAllUsers","userID","user","rb","f","i","markedFictions","length","status","fic","push","Promise","all","d","pb","wf","pf","message"],"mappings":";;;AAAA,OAAOA,CAAP,MAAc,sBAAd;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,SAAT,QAA0B,kBAA1B;AACA,SAASC,WAAT,EAAsBC,WAAtB,EAAmCC,cAAnC,QAAyD,8BAAzD;AACA,SAASC,WAAT,QAA4B,2BAA5B;;;AAGA,MAAMC,oBAAoB,GAAIC,KAAD,IAAU;AAAA;;AACrC,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBT,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACU,IAAD,EAAOC,MAAP,IAAiBX,QAAQ,CAAC,EAAD,CAA/B;AACA,QAAM,CAACY,KAAD,EAAQC,QAAR,IAAoBb,QAAQ,CAAC,IAAD,CAAlC;AACA,QAAM,CAACc,QAAD,EAAWC,WAAX,IAA0Bf,QAAQ,CAAC,KAAD,CAAxC;AAEA,MAAIgB,MAAM,GAAGf,SAAS,EAAtB;;AAEA,UAAQe,MAAM,CAACN,IAAf;AACE,SAAK,UAAL;AACEO,MAAAA,OAAO,CAAC,MAAD,CAAP;AACAlB,MAAAA,SAAS,CAAC,MAAI;AACZG,QAAAA,WAAW,GACVgB,IADD,CACOC,MAAD,IAAU;AACdJ,UAAAA,WAAW,CAAC,IAAD,CAAX;AACAN,UAAAA,QAAQ,CAACU,MAAD,CAAR;AACD,SAJD;AAKD,OANQ,EAMN,EANM,CAAT;;AAOF,SAAK,UAAL;AACEF,MAAAA,OAAO,CAAC,MAAD,CAAP;AACAlB,MAAAA,SAAS,CAAC,MAAI;AACZI,QAAAA,WAAW,GACVe,IADD,CACOC,MAAD,IAAU;AACdJ,UAAAA,WAAW,CAAC,IAAD,CAAX;AACAN,UAAAA,QAAQ,CAACU,MAAD,CAAR;AACD,SAJD;AAKD,OANQ,EAMN,EANM,CAAT;;AAQF,SAAK,UAAL;AACAF,MAAAA,OAAO,CAAC,MAAD,CAAP;AACAlB,MAAAA,SAAS,CAAC,MAAI;AACZqB,QAAAA,WAAW,GACVF,IADD,CACOC,MAAD,IAAU;AACdJ,UAAAA,WAAW,CAAC,IAAD,CAAX;AACAN,UAAAA,QAAQ,CAACU,MAAD,CAAR;AACD,SAJD;AAKD,OANQ,EAMN,EANM,CAAT;;AAQA,SAAK,YAAL;AACAF,MAAAA,OAAO,CAAC,MAAD,CAAP;AACAlB,MAAAA,SAAS,CAAC,MAAI;AACZM,QAAAA,WAAW,CAACW,MAAM,CAACK,MAAR,CAAX,CACCH,IADD,CACOI,IAAD,IAAQ;AACZ,cAAIC,EAAE,GAAG,EAAT;AACA,cAAIC,CAAC,GAAG,EAAR;;AACA,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,IAAI,CAACI,cAAL,CAAoBC,MAAxC,EAAgDF,CAAC,EAAjD,EAAoD;AAClD,gBAAKH,IAAI,CAACI,cAAL,CAAoBD,CAApB,EAAuBf,IAAvB,IAA+B,MAAhC,IAA0CY,IAAI,CAACI,cAAL,CAAoBD,CAApB,EAAuBG,MAAvB,IAAiC,WAA/E,EAA4F;AAC1FJ,cAAAA,CAAC,GAAGpB,cAAc,CAACkB,IAAI,CAACI,cAAL,CAAoBD,CAApB,CAAD,CAAd,CACHP,IADG,CACGW,GAAD,IAAO;AACXN,gBAAAA,EAAE,CAACO,IAAH,CAAQD,GAAR;AACD,eAHG,CAAJ;AAID;AACF;;AACDE,UAAAA,OAAO,CAACC,GAAR,CAAYT,EAAZ,EACCL,IADD,CACOe,CAAD,IAAK;AACTxB,YAAAA,QAAQ,CAACwB,CAAD,CAAR;AACAlB,YAAAA,WAAW,CAAC,IAAD,CAAX;AACD,WAJD;AAKD,SAjBD;AAkBD,OAnBQ,EAmBN,EAnBM,CAAT;;AAqBA,SAAK,eAAL;AACAE,MAAAA,OAAO,CAAC,MAAD,CAAP;AACAlB,MAAAA,SAAS,CAAC,MAAI;AACZM,QAAAA,WAAW,CAACW,MAAM,CAACK,MAAR,CAAX,CACCH,IADD,CACOI,IAAD,IAAQ;AACZ,cAAIY,EAAE,GAAG,EAAT;AACA,cAAIV,CAAC,GAAG,EAAR;;AACA,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,IAAI,CAACI,cAAL,CAAoBC,MAAxC,EAAgDF,CAAC,EAAjD,EAAoD;AAClD,gBAAKH,IAAI,CAACI,cAAL,CAAoBD,CAApB,EAAuBf,IAAvB,IAA+B,MAAhC,IAA0CY,IAAI,CAACI,cAAL,CAAoBD,CAApB,EAAuBG,MAAvB,IAAiC,SAA/E,EAA0F;AACxFJ,cAAAA,CAAC,GAAGpB,cAAc,CAACkB,IAAI,CAACI,cAAL,CAAoBD,CAApB,CAAD,CAAd,CACHP,IADG,CACGW,GAAD,IAAO;AACXK,gBAAAA,EAAE,CAACJ,IAAH,CAAQD,GAAR;AACD,eAHG,CAAJ;AAID;AACF;;AACDE,UAAAA,OAAO,CAACC,GAAR,CAAYE,EAAZ,EACChB,IADD,CACOe,CAAD,IAAK;AACTxB,YAAAA,QAAQ,CAACwB,CAAD,CAAR;AACAlB,YAAAA,WAAW,CAAC,IAAD,CAAX;AACD,WAJD;AAKD,SAjBD;AAkBD,OAnBQ,EAmBN,EAnBM,CAAT;;AAqBA,SAAK,eAAL;AACAE,MAAAA,OAAO,CAAC,MAAD,CAAP;AACAlB,MAAAA,SAAS,CAAC,MAAI;AACZM,QAAAA,WAAW,CAACW,MAAM,CAACK,MAAR,CAAX,CACCH,IADD,CACOI,IAAD,IAAQ;AACZ,cAAIa,EAAE,GAAG,EAAT;AACA,cAAIX,CAAC,GAAG,EAAR;;AACA,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,IAAI,CAACI,cAAL,CAAoBC,MAAxC,EAAgDF,CAAC,EAAjD,EAAoD;AAClD,gBAAKH,IAAI,CAACI,cAAL,CAAoBD,CAApB,EAAuBf,IAAvB,IAA+B,MAAhC,IAA0CY,IAAI,CAACI,cAAL,CAAoBD,CAApB,EAAuBG,MAAvB,IAAiC,WAA/E,EAA4F;AAC1FJ,cAAAA,CAAC,GAAGpB,cAAc,CAACkB,IAAI,CAACI,cAAL,CAAoBD,CAApB,CAAD,CAAd,CACHP,IADG,CACGW,GAAD,IAAO;AACXO,gBAAAA,EAAE,CAACN,IAAH,CAAQD,GAAR;AACD,eAHG,CAAJ;AAID;AACF;;AACDE,UAAAA,OAAO,CAACC,GAAR,CAAYG,EAAZ,EACCjB,IADD,CACOe,CAAD,IAAK;AACTxB,YAAAA,QAAQ,CAACwB,CAAD,CAAR;AACAlB,YAAAA,WAAW,CAAC,IAAD,CAAX;AACD,WAJD;AAKD,SAjBD;AAkBD,OAnBQ,EAmBN,EAnBM,CAAT;;AAqBA,SAAK,eAAL;AACAE,MAAAA,OAAO,CAAC,MAAD,CAAP;AACAlB,MAAAA,SAAS,CAAC,MAAI;AACZM,QAAAA,WAAW,CAACW,MAAM,CAACK,MAAR,CAAX,CACCH,IADD,CACOI,IAAD,IAAQ;AACZ,cAAIc,EAAE,GAAG,EAAT;AACA,cAAIZ,CAAC,GAAG,EAAR;;AACA,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,IAAI,CAACI,cAAL,CAAoBC,MAAxC,EAAgDF,CAAC,EAAjD,EAAoD;AAClD,gBAAKH,IAAI,CAACI,cAAL,CAAoBD,CAApB,EAAuBf,IAAvB,IAA+B,MAAhC,IAA0CY,IAAI,CAACI,cAAL,CAAoBD,CAApB,EAAuBG,MAAvB,IAAiC,SAA/E,EAA0F;AACxFJ,cAAAA,CAAC,GAAGpB,cAAc,CAACkB,IAAI,CAACI,cAAL,CAAoBD,CAApB,CAAD,CAAd,CACHP,IADG,CACGW,GAAD,IAAO;AACXO,gBAAAA,EAAE,CAACN,IAAH,CAAQD,GAAR;AACD,eAHG,CAAJ;AAID;AACF;;AACDE,UAAAA,OAAO,CAACC,GAAR,CAAYI,EAAZ,EACClB,IADD,CACOe,CAAD,IAAK;AACTxB,YAAAA,QAAQ,CAACwB,CAAD,CAAR;AACAlB,YAAAA,WAAW,CAAC,IAAD,CAAX;AACD,WAJD;AAKD,SAjBD;AAkBD,OAnBQ,EAmBN,EAnBM,CAAT;;AAqBA;AACEN,MAAAA,QAAQ,CAAC,EAAD,CAAR;AA3HJ;;AA+HA,MAAGG,KAAH,EAAS;AACP,wBAAO;AAAA,4BAAaA,KAAK,CAACyB,OAAnB;AAAA;AAAA;AAAA;AAAA;AAAA,YAAP;AACD,GAFD,MAEO,IAAG,CAACvB,QAAJ,EAAa;AAClB,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAKD,GANM,MAMA,IAAGA,QAAH,EAAY;AACjB,wBACE;AAAA,6BACE,QAAC,WAAD;AAAa,QAAA,IAAI,EAAEJ,IAAnB;AAAyB,QAAA,KAAK,EAAEF;AAAhC;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF;AAKD;AACF,CAtJD;;GAAMF,oB;UAMSL,S;;;KANTK,oB;AAwJN,eAAeA,oBAAf","sourcesContent":["import s from './catalog.module.css';\r\nimport CatalogPage from './catalog.jsx';\r\nimport { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { getAllBooks, getAllFilms, getFictionById } from './../../DataBase/Fictions.js'\r\nimport { getUserById } from './../../DataBase/Users.js'\r\n\r\n\r\nconst CatalogPageContainer = (props) =>{\r\n  const [elems, setElems] = useState([]);\r\n  const [type, seType] = useState([]);\r\n  const [error, setError] = useState(null);\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n\r\n  let params = useParams()\r\n\r\n  switch (params.type) {\r\n    case 'allBooks':\r\n      setType('book')\r\n      useEffect(()=>{\r\n        getAllBooks()\r\n        .then((result)=>{\r\n          setIsLoaded(true);\r\n          setElems(result)\r\n        })\r\n      }, [])\r\n    case 'allFilms':\r\n      setType('film')\r\n      useEffect(()=>{\r\n        getAllFilms()\r\n        .then((result)=>{\r\n          setIsLoaded(true);\r\n          setElems(result)\r\n        })\r\n      }, [])\r\n\r\n    case 'allUsers':\r\n    setType('user')\r\n    useEffect(()=>{\r\n      getAllUsers()\r\n      .then((result)=>{\r\n        setIsLoaded(true);\r\n        setElems(result)\r\n      })\r\n    }, [])\r\n\r\n    case 'read_books':\r\n    setType('book')\r\n    useEffect(()=>{\r\n      getUserById(params.userID)\r\n      .then((user)=>{\r\n        let rb = []\r\n        let f = ''\r\n        for (let i = 0; i < user.markedFictions.length; i++){\r\n          if ((user.markedFictions[i].type == 'book')&&(user.markedFictions[i].status == 'completed')){\r\n            f = getFictionById(user.markedFictions[i])\r\n            .then((fic)=>{\r\n              rb.push(fic)\r\n            })\r\n          }\r\n        }\r\n        Promise.all(rb)\r\n        .then((d)=>{\r\n          setElems(d)\r\n          setIsLoaded(true)\r\n        })\r\n      })\r\n    }, [])\r\n\r\n    case 'planned_books':\r\n    setType('book')\r\n    useEffect(()=>{\r\n      getUserById(params.userID)\r\n      .then((user)=>{\r\n        let pb = []\r\n        let f = ''\r\n        for (let i = 0; i < user.markedFictions.length; i++){\r\n          if ((user.markedFictions[i].type == 'book')&&(user.markedFictions[i].status == 'planned')){\r\n            f = getFictionById(user.markedFictions[i])\r\n            .then((fic)=>{\r\n              pb.push(fic)\r\n            })\r\n          }\r\n        }\r\n        Promise.all(pb)\r\n        .then((d)=>{\r\n          setElems(d)\r\n          setIsLoaded(true)\r\n        })\r\n      })\r\n    }, [])\r\n\r\n    case 'watched_films':\r\n    setType('film')\r\n    useEffect(()=>{\r\n      getUserById(params.userID)\r\n      .then((user)=>{\r\n        let wf = []\r\n        let f = ''\r\n        for (let i = 0; i < user.markedFictions.length; i++){\r\n          if ((user.markedFictions[i].type == 'film')&&(user.markedFictions[i].status == 'completed')){\r\n            f = getFictionById(user.markedFictions[i])\r\n            .then((fic)=>{\r\n              pf.push(fic)\r\n            })\r\n          }\r\n        }\r\n        Promise.all(wf)\r\n        .then((d)=>{\r\n          setElems(d)\r\n          setIsLoaded(true)\r\n        })\r\n      })\r\n    }, [])\r\n\r\n    case 'planned_films':\r\n    setType('film')\r\n    useEffect(()=>{\r\n      getUserById(params.userID)\r\n      .then((user)=>{\r\n        let pf = []\r\n        let f = ''\r\n        for (let i = 0; i < user.markedFictions.length; i++){\r\n          if ((user.markedFictions[i].type == 'film')&&(user.markedFictions[i].status == 'planned')){\r\n            f = getFictionById(user.markedFictions[i])\r\n            .then((fic)=>{\r\n              pf.push(fic)\r\n            })\r\n          }\r\n        }\r\n        Promise.all(pf)\r\n        .then((d)=>{\r\n          setElems(d)\r\n          setIsLoaded(true)\r\n        })\r\n      })\r\n    }, [])\r\n\r\n    default:\r\n      setElems([])\r\n  }\r\n\r\n\r\n  if(error){\r\n    return <div>Error: {error.message}</div>\r\n  } else if(!isLoaded){\r\n    return (\r\n      <div>\r\n        Loading...\r\n      </div>\r\n      );\r\n  } else if(isLoaded){\r\n    return (\r\n      <div>\r\n        <CatalogPage type={type} elems={elems} />\r\n      </div>\r\n      );\r\n  }\r\n}\r\n\r\nexport default CatalogPageContainer;\r\n"]},"metadata":{},"sourceType":"module"}