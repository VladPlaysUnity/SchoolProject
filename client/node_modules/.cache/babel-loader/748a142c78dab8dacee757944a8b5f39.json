{"ast":null,"code":"var _jsxFileName = \"D:\\\\Learning\\\\Litsey_10th_grade\\\\Informatics\\\\Fictionlib\\\\SchoolProject\\\\client\\\\src\\\\components\\\\CommentsComponent\\\\commentsContainer.jsx\",\n    _s = $RefreshSig$();\n\nimport s from './commentsContainer.module.css';\nimport { changeLikeOrDislikeOfCommentActionCreator } from './../../redux/reducers/profileReducer.js';\nimport { getLoggedInStatus, getLoggedUserId } from './../../LocalInfo/localInfo.js';\nimport { getUsersComments, getStatusOfCommentFromUser } from './../../DataBase/Comments.js';\nimport { getFictionById } from './../../DataBase/Fictions.js';\nimport { getUserById } from './../../DataBase/Users.js';\nimport { useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport CommentBlock from './Comment/comment.jsx';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CommentsContainer = props => {\n  _s();\n\n  const [comments, setComments] = useState([]);\n  const [isLoaded, setIsLoaded] = useState(false);\n  let promises = [];\n  let params = useParams();\n  useEffect(() => {\n    if (getLoggedInStatus()) {\n      let proms = [];\n      props.comments.map(comment => {\n        promises.push(comment);\n        promises.push(getUserById(parseInt(comment.staticInfo.author)).then(user => user.usersInfo.name));\n        promises.push(getFictionById(parseInt(comment.staticInfo.place)).then(fiction => fiction.info.name));\n        promises.push(getStatusOfCommentFromUser(comment.iD, parseInt(comment.staticInfo.author)));\n        proms.push(Promise.all(promises));\n      });\n      Promise.all(proms).then(data => {\n        setComments(data.map(comment => {\n          console.log(comment);\n          return /*#__PURE__*/_jsxDEV(CommentBlock, {\n            comment: comment[0],\n            status: 'none',\n            author: comment[1],\n            place: comment[2],\n            loggedIn: getLoggedInStatus(),\n            like_or_dislike: props.like_or_dislike\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 32,\n            columnNumber: 20\n          }, this);\n        }));\n        setIsLoaded(true);\n      });\n    } else {\n      let proms = [];\n      props.comments.map(comment => {\n        promises.push(comment);\n        promises.push(getUserById(parseInt(comment.staticInfo.author)).then(user => user.usersInfo.name));\n        promises.push(getFictionById(parseInt(comment.staticInfo.place)).then(fiction => fiction.info.name));\n        proms.push(Promise.all(promises));\n      });\n      Promise.all(proms).then(data => {\n        setComments(data.map(comment => {\n          console.log(comment);\n          return /*#__PURE__*/_jsxDEV(CommentBlock, {\n            comment: comment[0],\n            status: 'none',\n            author: comment[1],\n            place: comment[2],\n            loggedIn: getLoggedInStatus(),\n            like_or_dislike: props.like_or_dislike\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 20\n          }, this);\n        }));\n        setIsLoaded(true);\n      });\n    }\n  }, [params]);\n\n  if (isLoaded) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: s.comments,\n      children: comments\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this);\n  } else if (!isLoaded) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: s.comments,\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this);\n  }\n};\n\n_s(CommentsContainer, \"pJb1cF+Zyw/E1CzGnTkX0y/TOMk=\", false, function () {\n  return [useParams];\n});\n\n_c = CommentsContainer;\nexport default CommentsContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"CommentsContainer\");","map":{"version":3,"sources":["D:/Learning/Litsey_10th_grade/Informatics/Fictionlib/SchoolProject/client/src/components/CommentsComponent/commentsContainer.jsx"],"names":["s","changeLikeOrDislikeOfCommentActionCreator","getLoggedInStatus","getLoggedUserId","getUsersComments","getStatusOfCommentFromUser","getFictionById","getUserById","useEffect","useState","useParams","CommentBlock","CommentsContainer","props","comments","setComments","isLoaded","setIsLoaded","promises","params","proms","map","comment","push","parseInt","staticInfo","author","then","user","usersInfo","name","place","fiction","info","iD","Promise","all","data","console","log","like_or_dislike"],"mappings":"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","sourcesContent":["import s from './commentsContainer.module.css'\r\nimport {changeLikeOrDislikeOfCommentActionCreator} from './../../redux/reducers/profileReducer.js'\r\nimport {getLoggedInStatus, getLoggedUserId} from './../../LocalInfo/localInfo.js'\r\nimport {getUsersComments, getStatusOfCommentFromUser} from './../../DataBase/Comments.js'\r\nimport {getFictionById} from './../../DataBase/Fictions.js'\r\nimport {getUserById} from './../../DataBase/Users.js'\r\nimport { useEffect, useState } from 'react';\r\nimport {useParams} from 'react-router-dom'\r\nimport CommentBlock from './Comment/comment.jsx'\r\n\r\nconst CommentsContainer= (props)=>{\r\n  const [comments, setComments] = useState([])\r\n  const [isLoaded, setIsLoaded] = useState(false)\r\n\r\n  let promises = []\r\n  let params = useParams()\r\n  useEffect(()=>{\r\n    if (getLoggedInStatus()){\r\n      let proms = []\r\n      props.comments.map((comment) =>{\r\n        promises.push(comment)\r\n        promises.push(getUserById(parseInt(comment.staticInfo.author)).then((user)=>user.usersInfo.name))\r\n        promises.push(getFictionById(parseInt(comment.staticInfo.place)).then((fiction)=>fiction.info.name))\r\n        promises.push(getStatusOfCommentFromUser(comment.iD, parseInt(comment.staticInfo.author)))\r\n        proms.push(Promise.all(promises))\r\n        })\r\n\r\n        Promise.all(proms)\r\n        .then((data)=>{\r\n          setComments(data.map((comment)=>{\r\n            console.log(comment);\r\n            return <CommentBlock comment={comment[0]} status={'none'} author={comment[1]} place={comment[2]} loggedIn={getLoggedInStatus()} like_or_dislike={props.like_or_dislike}/>\r\n          }))\r\n          setIsLoaded(true)\r\n        })\r\n    } else{\r\n      let proms = []\r\n      props.comments.map((comment) =>{\r\n        promises.push(comment)\r\n        promises.push(getUserById(parseInt(comment.staticInfo.author)).then((user)=>user.usersInfo.name))\r\n        promises.push(getFictionById(parseInt(comment.staticInfo.place)).then((fiction)=>fiction.info.name))\r\n        proms.push(Promise.all(promises))\r\n        })\r\n\r\n        Promise.all(proms)\r\n        .then((data)=>{\r\n          setComments(data.map((comment)=>{\r\n            console.log(comment);\r\n            return <CommentBlock comment={comment[0]} status={'none'} author={comment[1]} place={comment[2]} loggedIn={getLoggedInStatus()} like_or_dislike={props.like_or_dislike}/>\r\n          }))\r\n          setIsLoaded(true)\r\n        })\r\n    }\r\n  },[params])\r\n\r\n  if(isLoaded){\r\n    return (\r\n      <div className={s.comments}>\r\n        {comments}\r\n      </div>\r\n    )\r\n  } else if(!isLoaded){\r\n    return (\r\n      <div className={s.comments}>\r\n        Loading...\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nexport default CommentsContainer;\r\n"]},"metadata":{},"sourceType":"module"}