{"ast":null,"code":"import { changeUsersStatusOfFiction } from './../../DataBase/Users.js';\nimport { changeUsersRatingOfFiction } from './../../DataBase/Fictions.js';\nimport { addComment } from './../../DataBase/Comments.js';\nconst CHANGE_USERS_STATUS_OF_FICTION = 'CHANGE-USERS-STATUS-OF-FICTION';\nconst CHANGE_USERS_RATING_OF_FICTION = 'CHANGE-USERS-RATING-OF-FICTION';\nconst ADD_COMMENT = 'ADD-COMMENT';\nlet intialState = {};\n\nconst chosenFictionReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : intialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case CHANGE_USERS_STATUS_OF_FICTION:\n      {\n        changeUsersStatusOfFiction(action.user_id, action.fiction_id, action.status);\n        return state;\n      }\n\n    case CHANGE_USERS_RATING_OF_FICTION:\n      {\n        async function changeRating() {\n          await fetch(`http://localhost:5000/fiction/changeUsersRatingOfFiction/${action.fiction_id}`, {\n            method: \"POST\",\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              userID: action.user_id,\n              rating: action.rating\n            })\n          });\n        }\n\n        changeRating();\n        return state;\n      }\n\n    case ADD_COMMENT:\n      {\n        addComment(action.author_id, action.place_id, action.content);\n        return state;\n      }\n      ;\n\n    default:\n      return state;\n  }\n};\n\nexport default chosenFictionReducer;\nexport const changeUsersStatusOfFictionActionCreator = (user_id, fiction_id, status) => ({\n  type: CHANGE_USERS_STATUS_OF_FICTION,\n  user_id: user_id,\n  fiction_id: fiction_id,\n  status: status\n});\nexport const changeUsersRatingOfFictionActionCreator = (fiction_id, user_id, rating) => ({\n  type: CHANGE_USERS_RATING_OF_FICTION,\n  user_id: user_id,\n  fiction_id: fiction_id,\n  rating: rating\n});\nexport const addCommentActionCreator = (author_id, place_id, content) => ({\n  type: ADD_COMMENT,\n  place_id: place_id,\n  content: content,\n  author_id: author_id\n});","map":{"version":3,"sources":["D:/Learning/Litsey_10th_grade/Informatics/Fictionlib/SchoolProject/client/src/redux/reducers/chosenFictionReducer.js"],"names":["changeUsersStatusOfFiction","changeUsersRatingOfFiction","addComment","CHANGE_USERS_STATUS_OF_FICTION","CHANGE_USERS_RATING_OF_FICTION","ADD_COMMENT","intialState","chosenFictionReducer","state","action","type","user_id","fiction_id","status","changeRating","fetch","method","headers","body","JSON","stringify","userID","rating","author_id","place_id","content","changeUsersStatusOfFictionActionCreator","changeUsersRatingOfFictionActionCreator","addCommentActionCreator"],"mappings":"AAAA,SAAQA,0BAAR,QAAyC,2BAAzC;AACA,SAAQC,0BAAR,QAAyC,8BAAzC;AACA,SAAQC,UAAR,QAAyB,8BAAzB;AAEA,MAAMC,8BAA8B,GAAG,gCAAvC;AACA,MAAMC,8BAA8B,GAAG,gCAAvC;AACA,MAAMC,WAAW,GAAG,aAApB;AAEA,IAAIC,WAAW,GAAG,EAAlB;;AAEA,MAAMC,oBAAoB,GAAG,YAAiC;AAAA,MAAhCC,KAAgC,uEAAxBF,WAAwB;AAAA,MAAXG,MAAW;;AAC5D,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKP,8BAAL;AAAoC;AAClCH,QAAAA,0BAA0B,CAACS,MAAM,CAACE,OAAR,EAAiBF,MAAM,CAACG,UAAxB,EAAoCH,MAAM,CAACI,MAA3C,CAA1B;AACA,eAAOL,KAAP;AACD;;AACD,SAAKJ,8BAAL;AAAoC;AAClC,uBAAeU,YAAf,GAA8B;AAC5B,gBAAMC,KAAK,CAAE,4DAA2DN,MAAM,CAACG,UAAW,EAA/E,EAAkF;AACzFI,YAAAA,MAAM,EAAE,MADiF;AAEzFC,YAAAA,OAAO,EAAE;AACP,8BAAgB;AADT,aAFgF;AAKzFC,YAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAACC,cAAAA,MAAM,EAACZ,MAAM,CAACE,OAAf;AAAwBW,cAAAA,MAAM,EAACb,MAAM,CAACa;AAAtC,aAAf;AALmF,WAAlF,CAAX;AAOD;;AACDR,QAAAA,YAAY;AACZ,eAAON,KAAP;AACD;;AACD,SAAKH,WAAL;AAAkB;AAChBH,QAAAA,UAAU,CAACO,MAAM,CAACc,SAAR,EAAmBd,MAAM,CAACe,QAA1B,EAAoCf,MAAM,CAACgB,OAA3C,CAAV;AACA,eAAOjB,KAAP;AACD;AAAA;;AACD;AACE,aAAOA,KAAP;AAvBJ;AAyBD,CA1BD;;AA4BA,eAAeD,oBAAf;AAEA,OAAO,MAAMmB,uCAAuC,GAAG,CAACf,OAAD,EAAUC,UAAV,EAAsBC,MAAtB,MACrD;AAACH,EAAAA,IAAI,EAAEP,8BAAP;AAAuCQ,EAAAA,OAAO,EAAEA,OAAhD;AAAyDC,EAAAA,UAAU,EAAEA,UAArE;AAAiFC,EAAAA,MAAM,EAAEA;AAAzF,CADqD,CAAhD;AAGP,OAAO,MAAMc,uCAAuC,GAAG,CAACf,UAAD,EAAaD,OAAb,EAAsBW,MAAtB,MACrD;AAACZ,EAAAA,IAAI,EAAEN,8BAAP;AAAuCO,EAAAA,OAAO,EAACA,OAA/C;AAAwDC,EAAAA,UAAU,EAACA,UAAnE;AAA+EU,EAAAA,MAAM,EAACA;AAAtF,CADqD,CAAhD;AAGP,OAAO,MAAMM,uBAAuB,GAAG,CAACL,SAAD,EAAYC,QAAZ,EAAsBC,OAAtB,MACrC;AAACf,EAAAA,IAAI,EAAEL,WAAP;AAAoBmB,EAAAA,QAAQ,EAAEA,QAA9B;AAAwCC,EAAAA,OAAO,EAAEA,OAAjD;AAA0DF,EAAAA,SAAS,EAAEA;AAArE,CADqC,CAAhC","sourcesContent":["import {changeUsersStatusOfFiction} from './../../DataBase/Users.js'\r\nimport {changeUsersRatingOfFiction} from './../../DataBase/Fictions.js'\r\nimport {addComment} from './../../DataBase/Comments.js'\r\n\r\nconst CHANGE_USERS_STATUS_OF_FICTION = 'CHANGE-USERS-STATUS-OF-FICTION';\r\nconst CHANGE_USERS_RATING_OF_FICTION = 'CHANGE-USERS-RATING-OF-FICTION';\r\nconst ADD_COMMENT = 'ADD-COMMENT';\r\n\r\nlet intialState = {};\r\n\r\nconst chosenFictionReducer = (state = intialState, action) => {\r\n  switch (action.type) {\r\n    case CHANGE_USERS_STATUS_OF_FICTION:{\r\n      changeUsersStatusOfFiction(action.user_id, action.fiction_id, action.status)\r\n      return state\r\n    }\r\n    case CHANGE_USERS_RATING_OF_FICTION:{\r\n      async function changeRating() {\r\n        await fetch(`http://localhost:5000/fiction/changeUsersRatingOfFiction/${action.fiction_id}`, {\r\n            method: \"POST\",\r\n            headers: {\r\n              'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({userID:action.user_id, rating:action.rating}),\r\n          })\r\n      }\r\n      changeRating()\r\n      return state\r\n    }\r\n    case ADD_COMMENT: {\r\n      addComment(action.author_id, action.place_id, action.content)\r\n      return state;\r\n    };\r\n    default:\r\n      return state\r\n  }\r\n};\r\n\r\nexport default chosenFictionReducer;\r\n\r\nexport const changeUsersStatusOfFictionActionCreator = (user_id, fiction_id, status) =>(\r\n  {type: CHANGE_USERS_STATUS_OF_FICTION, user_id: user_id, fiction_id: fiction_id, status: status}\r\n);\r\nexport const changeUsersRatingOfFictionActionCreator = (fiction_id, user_id, rating) =>(\r\n  {type: CHANGE_USERS_RATING_OF_FICTION, user_id:user_id, fiction_id:fiction_id, rating:rating}\r\n);\r\nexport const addCommentActionCreator = (author_id, place_id, content) =>(\r\n  {type: ADD_COMMENT, place_id: place_id, content: content, author_id: author_id}\r\n);\r\n"]},"metadata":{},"sourceType":"module"}