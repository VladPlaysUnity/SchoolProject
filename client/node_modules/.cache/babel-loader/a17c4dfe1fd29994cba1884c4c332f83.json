{"ast":null,"code":"var _jsxFileName = \"D:\\\\Learning\\\\Litsey_10th_grade\\\\Informatics\\\\Fictionlib\\\\SchoolProject\\\\client\\\\src\\\\components\\\\ChosenFiction\\\\chosenFictionContainer.jsx\",\n    _s = $RefreshSig$();\n\nimport { getFictionById, getAllFictions, getRatingOfFictionFromUser, getOverallRatingOfFiction } from './../../DataBase/Fictions.js';\nimport { getUsersFriends, getFictionAtUser } from './../../DataBase/Users.js';\nimport { getFictionsComments } from './../../DataBase/Comments.js';\nimport { getLoggedInStatus, getLoggedUserId } from './../../LocalInfo/localInfo.js';\nimport { changeUsersRatingOfFictionActionCreator, changeUsersStatusOfFictionActionCreator, addCommentActionCreator } from './../../redux/reducers/chosenFictionReducer.js';\nimport { Routes, Route, useParams, useNavigate } from \"react-router-dom\";\nimport { useState, useEffect } from 'react';\nimport ChosenFiction from './chosenFiction.jsx';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ChosenFictionContainer = props => {\n  _s();\n\n  const [fiction, setFiction] = useState([]);\n  const params = useParams();\n  const navigate = useNavigate();\n  const [error, setError] = useState(null);\n  const [isLoaded, setIsLoaded] = useState(false);\n  useEffect(() => {\n    async function fetchData(fiction_id) {\n      //returns fiction whose id was mentioned\n      const response = await fetch(`http://localhost:5000/fiction/getFictionById/${params.iD}`);\n\n      if (!response.ok) {\n        const message = `An error occurred at getfiction: ${response.statusText}`;\n        window.alert(message);\n        return;\n      }\n\n      const fic = await response.json();\n      setFiction(fic);\n    }\n\n    fetchData();\n  }, [params.iD, navigate]);\n  let view = '';\n\n  if (getLoggedInStatus()) {\n    view = 'loggedInUsersView';\n  } else {\n    view = 'notLoggedInUsersView';\n  }\n\n  let changeUsersRatingOfFiction = rating => {//props.dispatch(changeUsersRatingOfFictionActionCreator(iD, getLoggedUserId(), rating))\n  };\n\n  let changeUsersStatusOfFiction = status => {//props.dispatch(changeUsersStatusOfFictionActionCreator(getLoggedUserId(), iD, status))\n  };\n\n  let fictionAtFriends = []; //let friendsOfUser = getUsersFriends(getLoggedUserId())\n  //for (var i = 0; i < friendsOfUser.length; i++) {\n  //  fictionAtFriends.push({iD:friendsOfUser[i].iD, name:friendsOfUser[i].usersInfo.name, status:getFictionAtUser(fiction.iD, friendsOfUser[i].iD)})\n  //}\n\n  let addComment = content => {//props.dispatch(addCommentActionCreator(getLoggedUserId(),fiction.iD, content))\n  };\n\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Error: \", error.message]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 12\n    }, this);\n  } else if (!isLoaded) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 12\n    }, this);\n  } else if (isLoaded) {\n    if (fiction == null) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Fiction not found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 14\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(ChosenFiction, {\n        fiction: fiction,\n        loggedIn: getLoggedInStatus(),\n        usersStatus: \"not completed\",\n        usersRating: 5,\n        overallRating: 6,\n        comments: [],\n        fictionAtFriends: fictionAtFriends,\n        addComment: addComment,\n        changeUsersRatingOfFiction: changeUsersRatingOfFiction,\n        changeUsersStatusOfFiction: changeUsersStatusOfFiction,\n        view: view,\n        dispatch: props.dispatch\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: params.iD\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ChosenFictionContainer, \"q/SZdX5cwecTyATjys5sR4dzrZQ=\", false, function () {\n  return [useParams, useNavigate];\n});\n\n_c = ChosenFictionContainer;\nexport default ChosenFictionContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChosenFictionContainer\");","map":{"version":3,"sources":["D:/Learning/Litsey_10th_grade/Informatics/Fictionlib/SchoolProject/client/src/components/ChosenFiction/chosenFictionContainer.jsx"],"names":["getFictionById","getAllFictions","getRatingOfFictionFromUser","getOverallRatingOfFiction","getUsersFriends","getFictionAtUser","getFictionsComments","getLoggedInStatus","getLoggedUserId","changeUsersRatingOfFictionActionCreator","changeUsersStatusOfFictionActionCreator","addCommentActionCreator","Routes","Route","useParams","useNavigate","useState","useEffect","ChosenFiction","ChosenFictionContainer","props","fiction","setFiction","params","navigate","error","setError","isLoaded","setIsLoaded","fetchData","fiction_id","response","fetch","iD","ok","message","statusText","window","alert","fic","json","view","changeUsersRatingOfFiction","rating","changeUsersStatusOfFiction","status","fictionAtFriends","addComment","content","dispatch"],"mappings":"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","sourcesContent":["import {getFictionById, getAllFictions, getRatingOfFictionFromUser, getOverallRatingOfFiction} from './../../DataBase/Fictions.js'\r\nimport {getUsersFriends, getFictionAtUser} from './../../DataBase/Users.js'\r\nimport {getFictionsComments} from './../../DataBase/Comments.js'\r\nimport {getLoggedInStatus, getLoggedUserId} from './../../LocalInfo/localInfo.js'\r\nimport {changeUsersRatingOfFictionActionCreator, changeUsersStatusOfFictionActionCreator, addCommentActionCreator} from './../../redux/reducers/chosenFictionReducer.js'\r\nimport {Routes, Route, useParams, useNavigate} from \"react-router-dom\";\r\nimport {useState, useEffect} from 'react';\r\nimport ChosenFiction from './chosenFiction.jsx'\r\n\r\nconst ChosenFictionContainer = (props) =>{\r\n  const [fiction, setFiction] = useState([]);\r\n const params = useParams();\r\n const navigate = useNavigate();\r\n const [error, setError] = useState(null);\r\n const [isLoaded, setIsLoaded] = useState(false);\r\n\r\n useEffect(() => {\r\n   async function fetchData(fiction_id){\r\n     //returns fiction whose id was mentioned\r\n     const response = await fetch(`http://localhost:5000/fiction/getFictionById/${params.iD}`);\r\n\r\n     if (!response.ok) {\r\n        const message = `An error occurred at getfiction: ${response.statusText}`;\r\n         window.alert(message);\r\n         return;\r\n     }\r\n\r\n     const fic = await response.json();\r\n\r\n     setFiction(fic)\r\n   }\r\n   fetchData()\r\n }, [params.iD, navigate]);\r\n\r\n let view = ''\r\n if (getLoggedInStatus()){\r\n   view = 'loggedInUsersView';\r\n }else{\r\n   view = 'notLoggedInUsersView';\r\n }\r\n\r\n let changeUsersRatingOfFiction = (rating) =>{\r\n   //props.dispatch(changeUsersRatingOfFictionActionCreator(iD, getLoggedUserId(), rating))\r\n }\r\n let changeUsersStatusOfFiction = (status) =>{\r\n   //props.dispatch(changeUsersStatusOfFictionActionCreator(getLoggedUserId(), iD, status))\r\n }\r\n\r\n let fictionAtFriends = []\r\n //let friendsOfUser = getUsersFriends(getLoggedUserId())\r\n //for (var i = 0; i < friendsOfUser.length; i++) {\r\n //  fictionAtFriends.push({iD:friendsOfUser[i].iD, name:friendsOfUser[i].usersInfo.name, status:getFictionAtUser(fiction.iD, friendsOfUser[i].iD)})\r\n //}\r\n\r\n let addComment = (content) =>{\r\n   //props.dispatch(addCommentActionCreator(getLoggedUserId(),fiction.iD, content))\r\n }\r\n\r\n\r\n  if (error){\r\n    return <div>Error: {error.message}</div>\r\n  } else if (!isLoaded) {\r\n    return <div>Loading...</div>\r\n  } else if (isLoaded) {\r\n    if(fiction == null){\r\n      return <div>Fiction not found</div>\r\n    }\r\n    return(\r\n      <div>\r\n      <ChosenFiction fiction={fiction} loggedIn={getLoggedInStatus()}\r\n                usersStatus='not completed'\r\n                usersRating={5}\r\n                overallRating={6}\r\n                comments={[]}\r\n                fictionAtFriends={fictionAtFriends} addComment={addComment}\r\n                changeUsersRatingOfFiction={changeUsersRatingOfFiction}\r\n                changeUsersStatusOfFiction={changeUsersStatusOfFiction}\r\n                view={view} dispatch={props.dispatch}/>\r\n      </div>\r\n    )\r\n  }\r\n  return(\r\n    <div>\r\n      {params.iD}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ChosenFictionContainer;\r\n"]},"metadata":{},"sourceType":"module"}