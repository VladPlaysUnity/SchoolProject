{"ast":null,"code":"var _jsxFileName = \"D:\\\\Learning\\\\Litsey_10th_grade\\\\Informatics\\\\Fictionlib\\\\SchoolProject\\\\client\\\\src\\\\components\\\\ChosenFiction\\\\chosenFictionContainer.jsx\",\n    _s = $RefreshSig$();\n\nimport { getFictionById, getAllFictions, getRatingOfFictionFromUser, getOverallRatingOfFiction } from './../../DataBase/Fictions.js';\nimport { getUsersFollowedPeople, getFictionAtUser } from './../../DataBase/Users.js';\nimport { getFictionsComments } from './../../DataBase/Comments.js';\nimport { getLoggedInStatus } from './../../LocalInfo/localInfo.js';\nimport { changeUsersRatingOfFictionActionCreator, changeUsersStatusOfFictionActionCreator, addCommentActionCreator } from './../../redux/reducers/chosenFictionReducer.js';\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { useState, useEffect } from 'react';\nimport ChosenFiction from './chosenFiction.jsx';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ChosenFictionContainer = props => {\n  _s();\n\n  const [fiction, setFiction] = useState([]);\n  const [userRating, setUserRating] = useState(0);\n  const [fictionAtFollowed, setFictionAtFollowed] = useState([]);\n  const [userStatus, setUserStatus] = useState('not completed');\n  const [overallRating, setOverallRating] = useState(0);\n  const [comments, setComments] = useState([]);\n  const params = useParams();\n  const [error, setError] = useState(null);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const navigate = useNavigate();\n  useEffect(() => {\n    let fP = getFictionById(params.iD);\n    let oRP = getOverallRatingOfFiction(params.iD);\n    let commentsPromise = getFictionsComments(params.iD);\n    let rP = '';\n    let uS = '';\n    let followedPeoplePromises = '';\n\n    if (getLoggedInStatus()) {\n      rP = getRatingOfFictionFromUser(params.iD, props.loggedUser);\n      uS = getFictionAtUser(props.loggedUser, params.iD);\n      followedPeoplePromises = getUsersFollowedPeople(props.loggedUser).then(followedPeople => {\n        let k = '';\n        let miniPromises = [];\n\n        for (let i = 0; i < followedPeople.length; i++) {\n          k = getFictionAtUser(followedPeople[i].iD, params.iD).then(status => {\n            let d = {\n              iD: followedPeople[i].iD,\n              name: followedPeople[i].usersInfo.name,\n              status: status\n            };\n            return d;\n          });\n          miniPromises.push(k);\n        }\n\n        return Promise.all(miniPromises);\n      });\n    }\n\n    if (getLoggedInStatus()) {\n      Promise.all([fP, rP, oRP, uS, followedPeoplePromises, commentsPromise]).then(result => {\n        setFiction(result[0]);\n        setOverallRating(result[2]);\n        setUserRating(result[1]);\n        setUserStatus(result[3]);\n        setFictionAtFollowed(result[4]);\n        setComments(result[5].reverse());\n        setIsLoaded(true);\n      });\n    } else {\n      Promise.all([fP, oRP, commentsPromise]).then(result => {\n        setFiction(result[0]);\n        setOverallRating(result[1]);\n        setComments(result[2].reverse());\n        setIsLoaded(true);\n      });\n    }\n  }, [props.loggedUser, params.iD, comments]);\n  let view = '';\n\n  if (getLoggedInStatus()) {\n    view = 'loggedInUsersView';\n  } else {\n    view = 'notLoggedInUsersView';\n  }\n\n  let changeUsersRatingOfFiction = rating => {\n    props.dispatch(changeUsersRatingOfFictionActionCreator(params.iD, props.loggedUser, rating));\n    setUserRating(rating);\n  };\n\n  let changeUsersStatusOfFiction = status => {\n    props.dispatch(changeUsersStatusOfFictionActionCreator(props.loggedUser, params.iD, status));\n    setUserStatus(status);\n  };\n\n  async function addComment(content) {\n    let newComment = {\n      place: params.iD,\n      author: props.loggedUser,\n      content: content\n    };\n    await fetch(\"http://localhost:5000/comment/add\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(newComment)\n    }).then(a => {\n      getFictionsComments(params.iD).then(comments => {\n        setComments(comments.reverse());\n      }, error => {\n        setError(error);\n      });\n    }).catch(error => {\n      window.alert(error);\n      return;\n    });\n  }\n\n  let like_or_dislike = (comment_id, like_or_dislike) => {\n    likeOrDislike(comment_id, props.loggedUser, like_or_dislike).then(a => {\n      getFictionsComments(params.iD).then(comments => {\n        setComments(comments.reverse());\n      }, error => {\n        setError(error);\n      });\n    });\n  };\n\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Error: \", error.message]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 12\n    }, this);\n  } else if (!isLoaded) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 12\n    }, this);\n  } else if (isLoaded) {\n    if (!fiction) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Fiction not found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 14\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(ChosenFiction, {\n        fiction: fiction,\n        usersStatus: userStatus,\n        usersRating: userRating,\n        overallRating: overallRating,\n        comments: comments,\n        like_or_dislike: likes_or_dislike,\n        fictionAtFollowed: fictionAtFollowed,\n        addComment: addComment,\n        changeUsersRatingOfFiction: changeUsersRatingOfFiction,\n        changeUsersStatusOfFiction: changeUsersStatusOfFiction,\n        view: view,\n        dispatch: props.dispatch\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this);\n  }\n};\n\n_s(ChosenFictionContainer, \"kxsLNvRg6zcxP7ILLTyZI90iC1c=\", false, function () {\n  return [useParams, useNavigate];\n});\n\n_c = ChosenFictionContainer;\nexport default ChosenFictionContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChosenFictionContainer\");","map":{"version":3,"sources":["D:/Learning/Litsey_10th_grade/Informatics/Fictionlib/SchoolProject/client/src/components/ChosenFiction/chosenFictionContainer.jsx"],"names":["getFictionById","getAllFictions","getRatingOfFictionFromUser","getOverallRatingOfFiction","getUsersFollowedPeople","getFictionAtUser","getFictionsComments","getLoggedInStatus","changeUsersRatingOfFictionActionCreator","changeUsersStatusOfFictionActionCreator","addCommentActionCreator","useParams","useNavigate","useState","useEffect","ChosenFiction","ChosenFictionContainer","props","fiction","setFiction","userRating","setUserRating","fictionAtFollowed","setFictionAtFollowed","userStatus","setUserStatus","overallRating","setOverallRating","comments","setComments","params","error","setError","isLoaded","setIsLoaded","navigate","fP","iD","oRP","commentsPromise","rP","uS","followedPeoplePromises","loggedUser","then","followedPeople","k","miniPromises","i","length","status","d","name","usersInfo","push","Promise","all","result","reverse","view","changeUsersRatingOfFiction","rating","dispatch","changeUsersStatusOfFiction","addComment","content","newComment","place","author","fetch","method","headers","body","JSON","stringify","a","catch","window","alert","like_or_dislike","comment_id","likeOrDislike","message","likes_or_dislike"],"mappings":"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","sourcesContent":["import { getFictionById, getAllFictions, getRatingOfFictionFromUser, getOverallRatingOfFiction } from './../../DataBase/Fictions.js'\r\nimport { getUsersFollowedPeople, getFictionAtUser } from './../../DataBase/Users.js'\r\nimport { getFictionsComments } from './../../DataBase/Comments.js'\r\nimport { getLoggedInStatus } from './../../LocalInfo/localInfo.js'\r\nimport { changeUsersRatingOfFictionActionCreator, changeUsersStatusOfFictionActionCreator, addCommentActionCreator } from './../../redux/reducers/chosenFictionReducer.js'\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport { useState, useEffect } from 'react';\r\nimport ChosenFiction from './chosenFiction.jsx'\r\n\r\nconst ChosenFictionContainer = (props) =>{\r\n  const [fiction, setFiction] = useState([]);\r\n  const [userRating, setUserRating] = useState(0)\r\n  const [fictionAtFollowed, setFictionAtFollowed] = useState([])\r\n  const [userStatus, setUserStatus] = useState('not completed')\r\n  const [overallRating, setOverallRating] = useState(0)\r\n  const [comments, setComments] = useState([])\r\n  const params = useParams();\r\n  const [error, setError] = useState(null);\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n useEffect(() => {\r\n   let fP = getFictionById(params.iD)\r\n   let oRP = getOverallRatingOfFiction(params.iD)\r\n   let commentsPromise = getFictionsComments(params.iD)\r\n   let rP = ''\r\n   let uS = ''\r\n   let followedPeoplePromises = ''\r\n   if (getLoggedInStatus()){\r\n     rP = getRatingOfFictionFromUser(params.iD, props.loggedUser)\r\n     uS = getFictionAtUser(props.loggedUser, params.iD)\r\n     followedPeoplePromises = getUsersFollowedPeople(props.loggedUser)\r\n     .then((followedPeople)=>{\r\n       let k = ''\r\n       let miniPromises = []\r\n       for (let i = 0; i < followedPeople.length; i++) {\r\n         k = getFictionAtUser(followedPeople[i].iD, params.iD)\r\n         .then((status)=>{\r\n\r\n           let d = {iD:followedPeople[i].iD, name:followedPeople[i].usersInfo.name, status:status}\r\n           return d\r\n         })\r\n         miniPromises.push(k)\r\n       }\r\n        return Promise.all(miniPromises)\r\n     })\r\n   }\r\n\r\n\r\n\r\n   if (getLoggedInStatus()){\r\n     Promise.all([fP, rP, oRP, uS, followedPeoplePromises, commentsPromise])\r\n     .then((result)=>{\r\n       setFiction(result[0])\r\n       setOverallRating(result[2])\r\n       setUserRating(result[1])\r\n       setUserStatus(result[3])\r\n       setFictionAtFollowed(result[4])\r\n       setComments(result[5].reverse())\r\n       setIsLoaded(true)\r\n     })\r\n   } else{\r\n     Promise.all([fP, oRP, commentsPromise])\r\n     .then((result)=>{\r\n       setFiction(result[0])\r\n       setOverallRating(result[1])\r\n       setComments(result[2].reverse())\r\n       setIsLoaded(true)\r\n     })}\r\n }, [props.loggedUser,params.iD, comments]);\r\n\r\n let view = ''\r\n if (getLoggedInStatus()){\r\n   view = 'loggedInUsersView';\r\n }else{\r\n   view = 'notLoggedInUsersView';\r\n }\r\n\r\n let changeUsersRatingOfFiction = (rating) =>{\r\n   props.dispatch(changeUsersRatingOfFictionActionCreator(params.iD, props.loggedUser, rating))\r\n   setUserRating(rating)\r\n }\r\n let changeUsersStatusOfFiction = (status) =>{\r\n   props.dispatch(changeUsersStatusOfFictionActionCreator(props.loggedUser, params.iD, status))\r\n   setUserStatus(status)\r\n }\r\n\r\n async function addComment(content) {\r\n   let newComment = {place:params.iD, author:props.loggedUser, content:content}\r\n   await fetch(\"http://localhost:5000/comment/add\", {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify(newComment),\r\n  })\r\n  .then((a)=>{\r\n    getFictionsComments(params.iD)\r\n    .then((comments)=>{\r\n      setComments(comments.reverse())\r\n    }, (error)=>{\r\n      setError(error)\r\n    })\r\n  })\r\n  .catch(error => {\r\n    window.alert(error);\r\n    return;\r\n  });\r\n }\r\n\r\n let like_or_dislike = (comment_id, like_or_dislike)=>{\r\n   likeOrDislike(comment_id, props.loggedUser, like_or_dislike)\r\n   .then((a)=>{\r\n     getFictionsComments(params.iD)\r\n     .then((comments)=>{\r\n       setComments(comments.reverse())\r\n     }, (error)=>{\r\n       setError(error)\r\n     })\r\n   })\r\n }\r\n\r\n\r\n  if (error){\r\n    return <div>Error: {error.message}</div>\r\n  } else if (!isLoaded) {\r\n    return <div>Loading...</div>\r\n  } else if (isLoaded) {\r\n    if(!fiction){\r\n      return <div>Fiction not found</div>\r\n    }\r\n    return(\r\n      <div>\r\n      <ChosenFiction fiction={fiction}\r\n                usersStatus={userStatus}\r\n                usersRating={userRating}\r\n                overallRating={overallRating}\r\n                comments={comments} like_or_dislike={likes_or_dislike}\r\n                fictionAtFollowed={fictionAtFollowed} addComment={addComment}\r\n                changeUsersRatingOfFiction={changeUsersRatingOfFiction}\r\n                changeUsersStatusOfFiction={changeUsersStatusOfFiction}\r\n                view={view} dispatch={props.dispatch}/>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ChosenFictionContainer;\r\n"]},"metadata":{},"sourceType":"module"}